<!doctype html>
<html>
<head>
  <meta charset='utf-8' />
  <title>elastic-search-builder 0.1.0 | Documentation</title>
  <meta name='viewport' content='width=device-width,initial-scale=1'>
  <link href='assets/bass.css' type='text/css' rel='stylesheet' />
  <link href='assets/style.css' type='text/css' rel='stylesheet' />
  <link href='assets/github.css' type='text/css' rel='stylesheet' />
  <link href='assets/split.css' type='text/css' rel='stylesheet' />
</head>
<body class='documentation m0'>
    <div class='flex'>
      <div id='split-left' class='overflow-auto fs0 height-viewport-100'>
        <div class='py1 px2'>
          <h3 class='mb0 no-anchor'>elastic-search-builder</h3>
          <div class='mb1'><code>0.1.0</code></div>
          <input
            placeholder='Filter'
            id='filter-input'
            class='col12 block input'
            type='text' />
          <div id='toc'>
            <ul class='list-reset h5 py1-ul'>
              
                
                <li><a
                  href='#esbuilder'
                  class="">
                  esBuilder
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#option'
                  class="">
                  option
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#body'
                  class="">
                  body
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#build'
                  class="">
                  build
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#indices'
                  class="">
                  indices
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#type'
                  class="">
                  type
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#query'
                  class="">
                  query
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#aggs'
                  class="">
                  aggs
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#fields'
                  class="">
                  fields
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#size'
                  class="">
                  size
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#from'
                  class="">
                  from
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#appendaggs'
                  class="">
                  appendAggs
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#subaggs'
                  class="">
                  subAggs
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#forkaggs'
                  class="">
                  forkAggs
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#mergeaggs'
                  class="">
                  mergeAggs
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#bool'
                  class="">
                  bool
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#boolmust'
                  class="">
                  boolMust
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#boolnot'
                  class="">
                  boolNot
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#boolshould'
                  class="">
                  boolShould
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#boolfilter'
                  class="">
                  boolFilter
                  
                </a>
                
                </li>
              
            </ul>
          </div>
          <div class='mt1 h6 quiet'>
            <a href='http://documentation.js.org/reading-documentation.html'>Need help reading this?</a>
          </div>
        </div>
      </div>
      <div id='split-right' class='relative overflow-auto height-viewport-100'>
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='esbuilder'>
      esBuilder
    </h3>
    
    
  </div>
  

  <p>elastic-search-builder working with <a href="https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/index.html">elasticsearch.js</a></p>
<p>See more use case in the docs as well as in the tests.</p>


  <div class='pre p1 fill-light mt0'>esBuilder</div>
  
  

  
  
  
  
  
  

  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code>(<a href="#option">option</a> | <a href="#body">body</a> | <a href="#build">build</a>)</code>:
        see below.

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>Usage

<span class="hljs-keyword">const</span> elasticsearch = <span class="hljs-built_in">require</span>(<span class="hljs-string">'elasticsearch'</span>);
<span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> elasticsearch.Client({
     <span class="hljs-attr">host</span>: <span class="hljs-string">'localhost:9200'</span>
});
<span class="hljs-keyword">const</span> esb = <span class="hljs-built_in">require</span>(<span class="hljs-string">'elastic-search-builder'</span>);
<span class="hljs-keyword">const</span> searchparams = esb()
 .option()
 .indices([<span class="hljs-string">'2016.01.01'</span>])
 .body()
 .query({
     <span class="hljs-attr">match</span>: {
         <span class="hljs-attr">message</span>: <span class="hljs-string">'hello world'</span>
     }
  })
 .aggs()
 .build();
client.search(searchparams).then(<span class="hljs-function"><span class="hljs-params">body</span> =&gt;</span> {
     <span class="hljs-built_in">console</span>.log(body)
})</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='option'>
      option
    </h3>
    
    
  </div>
  

  <p>Add custom option</p>


  <div class='pre p1 fill-light mt0'>option(content: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>): (<a href="#indices">indices</a> | <a href="#type">type</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>content</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</code>
	    option body.

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code>(<a href="#indices">indices</a> | <a href="#type">type</a>)</code>:
        see below

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-comment">//build option</span>
esb().option({
  <span class="hljs-attr">index</span>: <span class="hljs-string">'logs'</span>,
  <span class="hljs-attr">type</span>: <span class="hljs-string">'2016.01.01'</span>
}).build()</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='body'>
      body
    </h3>
    
    
  </div>
  

  <p>Add custom body</p>


  <div class='pre p1 fill-light mt0'>body(content: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>): (<a href="#query">query</a> | <a href="#aggs">aggs</a> | <a href="#fields">fields</a> | <a href="#size">size</a> | <a href="#from">from</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>content</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</code>
	    option body.

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code>(<a href="#query">query</a> | <a href="#aggs">aggs</a> | <a href="#fields">fields</a> | <a href="#size">size</a> | <a href="#from">from</a>)</code>:
        see below.

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>esb().body({
   <span class="hljs-attr">query</span>: {
      <span class="hljs-attr">match</span>: {
         <span class="hljs-attr">message</span>: <span class="hljs-string">'hello'</span>
      }
   }   
})
.build()</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='build'>
      build
    </h3>
    
    
  </div>
  

  <p>Build with options and body.</p>


  <div class='pre p1 fill-light mt0'>build(): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></div>
  
  

  
  
  
  
  
  

  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code>:
        search option.

      
    
  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='indices'>
      indices
    </h3>
    
    
  </div>
  

  <p>Add index field to option.</p>


  <div class='pre p1 fill-light mt0'>indices(indices: (<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a> | <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>), ignoreUnavailable: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>, allowNoIndices: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>indices</span> <code class='quiet'>((<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a> | <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)
            = <code>[]</code>)</code>
	    multi index

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>ignoreUnavailable</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>)</code>
	    Whether specified concrete indices should be ignored when unavailable (missing or closed)

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>allowNoIndices</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>)</code>
	    Whether to ignore if a wildcard indices expression resolves into no concrete indices. (This includes _all string or when no indices have been specified)

          </div>
          
        </div>
      
    </div>
  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>esb()
 .options()
 .indices([<span class="hljs-string">'2016.01.01'</span>], <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>)
 .build()</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='type'>
      type
    </h3>
    
    
  </div>
  

  <p>Add type field to option</p>


  <div class='pre p1 fill-light mt0'>type(args: ...any)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>args</span> <code class='quiet'>(...any)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>esb()
 .options()
 .type([<span class="hljs-string">'company'</span>, <span class="hljs-string">'school'</span>], <span class="hljs-string">'employee'</span>, <span class="hljs-string">'student'</span>)
 .build()</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='query'>
      query
    </h3>
    
    
  </div>
  

  <p>Add query clause to query body</p>


  <div class='pre p1 fill-light mt0'>query(queryBody: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>): <a href="#bool">bool</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>queryBody</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>
            = <code>{}</code>)</code>
	    any query clause

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="#bool">bool</a></code>:
        see below.

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-comment">//build body</span>
esb()
 .body()
 .query({
     <span class="hljs-attr">match</span>: {
         <span class="hljs-attr">message</span>: <span class="hljs-string">'hello'</span>
     }
 })
 .build()
<span class="hljs-comment">//result:</span>
{
    <span class="hljs-attr">body</span>: {
         <span class="hljs-attr">query</span>: {
             <span class="hljs-attr">match</span>: {
                 <span class="hljs-attr">message</span>: <span class="hljs-string">'hello'</span>
             }
        }   
    }
}</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='aggs'>
      aggs
    </h3>
    
    
  </div>
  

  <p>Add aggregation to aggs body</p>


  <div class='pre p1 fill-light mt0'>aggs(aggsBody: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>): (<a href="#appendaggs">appendAggs</a> | <a href="#subaggs">subAggs</a> | <a href="#forkaggs">forkAggs</a> | <a href="#mergeaggs">mergeAggs</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>aggsBody</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>
            = <code>{}</code>)</code>
	    any aggregation body

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code>(<a href="#appendaggs">appendAggs</a> | <a href="#subaggs">subAggs</a> | <a href="#forkaggs">forkAggs</a> | <a href="#mergeaggs">mergeAggs</a>)</code>:
        see below.

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>esb()
 .body()
 .aggs({
     <span class="hljs-attr">message</span>: {
         <span class="hljs-attr">terms</span>: {
             <span class="hljs-attr">field</span>: <span class="hljs-string">'message'</span>
         }
     }
 })
 .build();
<span class="hljs-comment">//result:</span>
{
     <span class="hljs-attr">body</span>: {
         <span class="hljs-attr">aggs</span>: {
             <span class="hljs-attr">message</span>: {
                 <span class="hljs-attr">terms</span>: {
                     <span class="hljs-attr">field</span>: <span class="hljs-string">'message'</span>
                 }
             }
         }
     }
}</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='fields'>
      fields
    </h3>
    
    
  </div>
  

  <p><strong><em><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-field-caps.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/search-field-caps.html</a></em></strong></p>


  <div class='pre p1 fill-light mt0'>fields(args: ...any)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>args</span> <code class='quiet'>(...any)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>esb()
 .body()
 .fields(<span class="hljs-string">'rating'</span>, <span class="hljs-string">'count'</span>)
 .build()
<span class="hljs-comment">//result:</span>
{
     <span class="hljs-attr">body</span>: {
         <span class="hljs-attr">fields</span>: [<span class="hljs-string">'rating'</span>, <span class="hljs-string">'count'</span>]
     }
}</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='size'>
      size
    </h3>
    
    
  </div>
  

  <p><strong><em><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-from-size.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-from-size.html</a></em></strong></p>


  <div class='pre p1 fill-light mt0'>size(size: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>size</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
            = <code>0</code>)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>esb()
 .size(<span class="hljs-number">10</span>)
 .build()
<span class="hljs-comment">//result:</span>
{
     <span class="hljs-attr">body</span>: {
         <span class="hljs-attr">size</span>: <span class="hljs-number">10</span>
     }
}</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='from'>
      from
    </h3>
    
    
  </div>
  

  <p><strong><em><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-from-size.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-from-size.html</a></em></strong></p>


  <div class='pre p1 fill-light mt0'>from(from: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>from</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
            = <code>0</code>)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>esb()
 .from(<span class="hljs-number">1</span>)
 .build()
<span class="hljs-comment">//result:</span>
{
     <span class="hljs-attr">body</span>: {
         <span class="hljs-attr">from</span>: <span class="hljs-number">1</span>
     }
}</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='appendaggs'>
      appendAggs
    </h3>
    
    
  </div>
  

  <p>Add an aggregation clause to the aggs body.</p>


  <div class='pre p1 fill-light mt0'>appendAggs(name: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, type: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, body: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>name</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    Name of the aggregation.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>type</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    Name of the aggregation type, such as 
<code>'sum'</code>
 or 
<code>'terms'</code>
.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>body</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</code>
	    Options to include in the aggregation.

          </div>
          
        </div>
      
    </div>
  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>esb()
 .body()
 .aggs()
 .appendAggs(<span class="hljs-string">'message'</span>, <span class="hljs-string">'terms'</span>, {
     <span class="hljs-attr">field</span>: <span class="hljs-string">'message'</span>
 })
 .build();</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='subaggs'>
      subAggs
    </h3>
    
    
  </div>
  

  <p>Add aggregation to sub aggs body.</p>


  <div class='pre p1 fill-light mt0'>subAggs(aggsBody: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>aggsBody</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>
            = <code>{}</code>)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>esb()
 .body()
 .aggs()
 .appendAggs(<span class="hljs-string">'message'</span>, <span class="hljs-string">'terms'</span>, {
     <span class="hljs-attr">field</span>: <span class="hljs-string">'message'</span>
 })
 .subAggs()
 .appendAggs(<span class="hljs-string">'name'</span>, <span class="hljs-string">'terms'</span>, {  
     <span class="hljs-attr">field</span>: <span class="hljs-string">'name'</span>
 })
 .build();
<span class="hljs-comment">//result</span>
{
 <span class="hljs-string">"body"</span>: {
     <span class="hljs-string">"aggs"</span>: {
         <span class="hljs-string">"message"</span>: {
             <span class="hljs-string">"terms"</span>: {
                 <span class="hljs-string">"field"</span>: <span class="hljs-string">"message"</span>
             },
             <span class="hljs-string">"aggs"</span>: {
                 <span class="hljs-string">"name"</span>: {
                     <span class="hljs-string">"terms"</span>: {
                         <span class="hljs-string">"field"</span>: <span class="hljs-string">"name"</span>
                     }
                 }
             }
         }
     }
 }
}</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='forkaggs'>
      forkAggs
    </h3>
    
    
  </div>
  

  <p>fork from current aggs node</p>


  <div class='pre p1 fill-light mt0'>forkAggs()</div>
  
  

  
  
  
  
  
  

  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>esb()
 .body()
 .aggs()
 .appendAggs(<span class="hljs-string">'by_gender'</span>, <span class="hljs-string">'terms'</span>, {
      <span class="hljs-string">"field"</span>: <span class="hljs-string">"gender"</span>
  })
 .subAggs()
 .forkAggs()
 .appendAggs(<span class="hljs-string">'by_city'</span>, <span class="hljs-string">'terms'</span>, {
     <span class="hljs-string">"field"</span>: <span class="hljs-string">"city"</span>
 })
 .subAggs()
 .appendAggs(<span class="hljs-string">'all_name'</span>, <span class="hljs-string">'terms'</span>, {
     <span class="hljs-string">"field"</span>: <span class="hljs-string">"name"</span>
 })
 .mergeAggs()
 .appendAggs(<span class="hljs-string">'by_language'</span>, <span class="hljs-string">'terms'</span>, {
     <span class="hljs-string">"field"</span>: <span class="hljs-string">"language"</span>
 })
 .subAggs()
 .appendAggs(<span class="hljs-string">'all_name'</span>, <span class="hljs-string">'terms'</span>, {
     <span class="hljs-string">"field"</span>: <span class="hljs-string">"name"</span>
 })
 .build()
<span class="hljs-comment">//result:</span>
{
  <span class="hljs-string">"aggs"</span>: {
      <span class="hljs-string">"by_gender"</span>: {
          <span class="hljs-string">"terms"</span>: {
              <span class="hljs-string">"field"</span>: <span class="hljs-string">"gender"</span>
          },
          <span class="hljs-string">"aggs"</span>: {
              <span class="hljs-string">"by_city"</span>: {
                  <span class="hljs-string">"terms"</span>: {
                      <span class="hljs-string">"field"</span>: <span class="hljs-string">"city"</span>
                  },
                  <span class="hljs-string">"aggs"</span>: {
                      <span class="hljs-string">"all_name"</span>: {
                          <span class="hljs-string">"terms"</span>: {
                              <span class="hljs-string">"field"</span>: <span class="hljs-string">"name"</span>
                          }
                      }
                  }
              },
              <span class="hljs-string">"by_language"</span>: {
                  <span class="hljs-string">"terms"</span>: {
                      <span class="hljs-string">"field"</span>: <span class="hljs-string">"language"</span>
                  },
                  <span class="hljs-string">"aggs"</span>: {
                      <span class="hljs-string">"all_name"</span>: {
                          <span class="hljs-string">"terms"</span>: {
                              <span class="hljs-string">"field"</span>: <span class="hljs-string">"name"</span>
                          }
                      }
                  }
              }
          }
      }
  }
}</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='mergeaggs'>
      mergeAggs
    </h3>
    
    
  </div>
  

  <p>merge to forked aggs</p>


  <div class='pre p1 fill-light mt0'>mergeAggs()</div>
  
  

  
  
  
  
  
  

  

  

  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='bool'>
      bool
    </h3>
    
    
  </div>
  

  <p>Add bool clause to query body.</p>


  <div class='pre p1 fill-light mt0'>bool(boolBody: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>): (<a href="#boolmust">boolMust</a> | <a href="#boolnot">boolNot</a> | <a href="#boolshould">boolShould</a> | <a href="#boolfilter">boolFilter</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>boolBody</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</code>
	    bool clause

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code>(<a href="#boolmust">boolMust</a> | <a href="#boolnot">boolNot</a> | <a href="#boolshould">boolShould</a> | <a href="#boolfilter">boolFilter</a>)</code>:
        see below.

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>esb()
 .body()
 .query()
 .bool({
     <span class="hljs-attr">must</span>: {
         <span class="hljs-attr">term</span> : { <span class="hljs-attr">user</span> : <span class="hljs-string">'kimchy'</span> }
     },
     <span class="hljs-attr">must_not</span>: {
         <span class="hljs-attr">range</span>: {
             <span class="hljs-attr">age</span>: {
                 <span class="hljs-attr">gte</span>: <span class="hljs-number">10</span>,
                 <span class="hljs-attr">lte</span>: <span class="hljs-number">20</span>
             }
         }
     }
 })
 .build()
<span class="hljs-comment">//result:</span>
{
     <span class="hljs-string">"body"</span>: {
         <span class="hljs-string">"query"</span>: {
             <span class="hljs-string">"bool"</span>: {
                 <span class="hljs-string">"must"</span>: {
                     <span class="hljs-string">"term"</span>: { <span class="hljs-string">"user"</span>: <span class="hljs-string">"kimchy"</span>}
                 },
                 <span class="hljs-string">"must_not"</span>: {
                     <span class="hljs-string">"range"</span>: {
                         <span class="hljs-string">"age"</span>: {
                             <span class="hljs-string">"gte"</span>: <span class="hljs-number">10</span>,
                             <span class="hljs-string">"lte"</span>: <span class="hljs-number">20</span>
                         }
                     }
                 }
             }
         }
     }
}</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='boolmust'>
      boolMust
    </h3>
    
    
  </div>
  

  <p>The clause (query) must appear in matching documents and will contribute to the score.</p>


  <div class='pre p1 fill-light mt0'>boolMust(args: ...any)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>args</span> <code class='quiet'>(...any)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>esb()
 .body()
 .query()
 .bool()
 .boolMust({
     <span class="hljs-attr">term</span> : { <span class="hljs-attr">user</span> : <span class="hljs-string">'kimchy'</span> }
 })
 .build()

<span class="hljs-comment">//result</span>
{
 <span class="hljs-string">"body"</span>: {
     <span class="hljs-string">"query"</span>: {
         <span class="hljs-string">"bool"</span>: {
             <span class="hljs-string">"must"</span>: [
                 {
                     <span class="hljs-string">"term"</span> : { 
                         <span class="hljs-string">"user"</span> : <span class="hljs-string">'kimchy'</span> 
                     }
                 }
             ]
         }
     }
 }
}</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='boolnot'>
      boolNot
    </h3>
    
    
  </div>
  

  <p>The clause (query) must not appear in the matching documents.
Clauses are executed in filter context meaning that scoring is ignored and clauses are considered for caching.
Because scoring is ignored, a score of 0 for all documents is returned.</p>


  <div class='pre p1 fill-light mt0'>boolNot(args: ...any)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>args</span> <code class='quiet'>(...any)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>esb()
 .body()
 .query()
 .bool()
 .boolNot({
     <span class="hljs-attr">term</span> : { <span class="hljs-attr">user</span> : <span class="hljs-string">'kimchy'</span> }
 })
 .build()

<span class="hljs-comment">//result</span>
{
 <span class="hljs-string">"body"</span>: {
     <span class="hljs-string">"query"</span>: {
         <span class="hljs-string">"bool"</span>: {
             <span class="hljs-string">"must_not"</span>: [
                 {
                     <span class="hljs-string">"term"</span> : { 
                         <span class="hljs-string">"user"</span> : <span class="hljs-string">'kimchy'</span> 
                     }
                 }
             ]
         }
     }
 }
}</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='boolshould'>
      boolShould
    </h3>
    
    
  </div>
  

  <p>The clause (query) should appear in the matching document.
If the bool query is in a query context and has a must or filter clause then a document will match the bool query even if none of the should queries match.
In this case these clauses are only used to influence the score.
If the bool query is a filter context or has neither must or filter then at least one of the should queries must match a document for it to match the bool query.
This behavior may be explicitly controlled by settings the minimum_should_match parameter.</p>


  <div class='pre p1 fill-light mt0'>boolShould(args: ...any)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>args</span> <code class='quiet'>(...any)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>esb()
 .body()
 .query()
 .bool()
 .boolShould({
     <span class="hljs-attr">term</span> : { <span class="hljs-attr">user</span> : <span class="hljs-string">'kimchy'</span> }
 })
 .build()

<span class="hljs-comment">//result</span>
{
 <span class="hljs-string">"body"</span>: {
     <span class="hljs-string">"query"</span>: {
         <span class="hljs-string">"bool"</span>: {
             <span class="hljs-string">"should"</span>: [
                 {
                     <span class="hljs-string">"term"</span> : { 
                         <span class="hljs-string">"user"</span> : <span class="hljs-string">'kimchy'</span> 
                     }
                 }
             ]
         }
     }
 }
}</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='boolfilter'>
      boolFilter
    </h3>
    
    
  </div>
  

  <p>The clause (query) must appear in matching documents.
However unlike must the score of the query will be ignored.
Filter clauses are executed in filter context, meaning that scoring is ignored and clauses are considered for caching.</p>


  <div class='pre p1 fill-light mt0'>boolFilter(args: ...any)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>args</span> <code class='quiet'>(...any)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>esb()
 .body()
 .query()
 .bool()
 .boolFilter({
     <span class="hljs-attr">term</span> : { <span class="hljs-attr">user</span> : <span class="hljs-string">'kimchy'</span> }
 })
 .build()

<span class="hljs-comment">//result</span>
{
 <span class="hljs-string">"body"</span>: {
     <span class="hljs-string">"query"</span>: {
         <span class="hljs-string">"bool"</span>: {
             <span class="hljs-string">"filter"</span>: [
                 {
                     <span class="hljs-string">"term"</span> : { 
                         <span class="hljs-string">"user"</span> : <span class="hljs-string">'kimchy'</span> 
                     }
                 }
             ]
         }
     }
 }
}</pre>
    
  

  

  

  
</section>

          
        
      </div>
    </div>
  <script src='assets/anchor.js'></script>
  <script src='assets/split.js'></script>
  <script src='assets/site.js'></script>
</body>
</html>
